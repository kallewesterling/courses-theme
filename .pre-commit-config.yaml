repos:
  - repo: local
    hooks:
      - id: css-syntax-check
        name: CSS syntax check
        entry: npx stylelint production/style.css production/css/*.css
        language: system
        files: \.css$

      - id: js-syntax-check
        name: JavaScript syntax check
        entry: node --check production/build-footer.js production/skilljar-theme-v3.0.js
        language: system
        files: \.js$

      - id: js-minify
        name: JavaScript minify (with sourcemap)
        entry: >
          npx terser production/skilljar-theme-v3.0.js
          -c -m
          -o production/skilljar-theme-v3.0.min.js
          --source-map "filename='skilljar-theme-v3.0.min.js',url='skilljar-theme-v3.0.min.js.map'"
        language: system
        files: ^production/skilljar-theme-v3\.0\.js$
        pass_filenames: false

      - id: stage-minified
        name: Stage minified JS + sourcemap
        entry: sh -c "git add production/skilljar-theme-v3.0.min.js production/skilljar-theme-v3.0.min.js.map"
        language: system
        pass_filenames: false
